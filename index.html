<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TD-Store Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #ffffff;
            background: #0a0a0a;
            min-height: 100vh;
            font-size: 15px;
            font-weight: 400;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;
        }
        
        .header {
            background: #0a0a0a;
            border-bottom: 1px solid #1a1a1a;
            padding: 24px 0;
            margin-bottom: 0;
            position: relative;
            z-index: 10;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            text-align: center;
        }
        
        .header h1 {
            color: #ffffff;
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 16px;
            border: none;
            letter-spacing: -0.3px;
        }
        
        .badges {
            margin: 20px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            margin: 2px;
            background: #1a1a1a;
            color: #888888;
            text-decoration: none;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 500;
            border: 1px solid #2a2a2a;
            transition: all 0.2s ease;
        }
        
        .badge:hover {
            background: #2a2a2a;
            color: #cccccc;
        }
        
        .badge.blue { 
            background: #1a1a1a; 
            color: #0066ff;
            border-color: #333333;
        }
        
        .badge.green { 
            background: #1a1a1a; 
            color: #00cc66;
            border-color: #333333;
        }
        
        .badge.gold { 
            background: #1a1a1a; 
            color: #ffaa00;
            border-color: #333333;
        }
        
        .main-content {
            padding: 0 24px 40px;
        }
        
        .content {
            background: #0d1117;
            padding: 0;
        }
        
        .content h1, .content h2, .content h3 {
            color: #ffffff;
            margin-top: 40px;
            margin-bottom: 20px;
            font-weight: 700;
            letter-spacing: -0.3px;
        }
        
        .content h1 {
            font-size: 2.2rem;
            border-bottom: 2px solid #333333;
            padding-bottom: 12px;
        }
        
        .content h2 {
            font-size: 1.6rem;
            border-bottom: 1px solid #333333;
            padding-bottom: 8px;
        }
        
        .content h3 {
            font-size: 1.3rem;
            color: #cccccc;
        }
        
        .content p {
            margin-bottom: 16px;
            color: #cccccc;
            font-size: 15px;
            line-height: 1.7;
        }
        
        .content code {
            background: #1a1a1a;
            color: #00ff88;
            padding: 3px 8px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', 'Fira Code', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 13px;
            border: 1px solid #333333;
            font-weight: 500;
        }
        
        .content pre {
            background: #1a1a1a;
            color: #cccccc;
            padding: 20px;
            border-radius: 12px;
            overflow-x: auto;
            border: 1px solid #333333;
            margin: 20px 0;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }
        
        .content pre code {
            background: transparent;
            border: none;
            padding: 0;
            color: #cccccc;
        }
        
        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
        }
        
        .content th, .content td {
            border: 1px solid #30363d;
            padding: 12px 16px;
            text-align: left;
            color: #c9d1d9;
        }
        
        .content th {
            background: #161b22;
            font-weight: 600;
            color: #f0f6fc;
        }
        
        .content tr:nth-child(even) {
            background: #161b22;
        }
        
        .content ul, .content ol {
            padding-left: 24px;
            margin-bottom: 16px;
        }
        
        .content li {
            margin: 8px 0;
            color: #c9d1d9;
        }
        
        .content a {
            color: #58a6ff;
            text-decoration: none;
        }
        
        .content a:hover {
            text-decoration: underline;
        }
        
        .info-box {
            background: #161b22;
            border: 1px solid #30363d;
            border-left: 4px solid #0969da;
            border-radius: 6px;
            padding: 16px;
            margin: 24px 0;
        }
        
        .info-box.warning {
            border-left-color: #d29922;
        }
        
        .info-box.success {
            border-left-color: #1a7f37;
        }
        
        .footer {
            background: #161b22;
            border-top: 1px solid #30363d;
            text-align: center;
            margin-top: 48px;
            padding: 32px 24px;
            color: #8b949e;
        }
        
        .footer p {
            margin: 8px 0;
        }
        
        .emoji {
            font-size: 1.1em;
            margin-right: 8px;
        }
        
        .breadcrumb {
            color: #8b949e;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .breadcrumb a {
            color: #58a6ff;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%);
            border-right: 1px solid #333333;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid #333333;
        }
        
        .sidebar-header h2 {
            color: #ffffff;
            font-size: 1.25rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.3px;
        }
        
        .sidebar-nav {
            padding: 16px 0;
        }
        
        .nav-section {
            margin-bottom: 8px;
        }
        
        .nav-section-title {
            color: #888888;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 12px 20px 8px;
            margin: 0;
        }
        
        .nav-item {
            display: block;
            color: #cccccc;
            text-decoration: none;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            position: relative;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            transform: translateX(2px);
        }
        
        .nav-item.active {
            background: rgba(0, 102, 255, 0.1);
            color: #0066ff;
            border-left-color: #0066ff;
            font-weight: 600;
        }
        
        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #0066ff 0%, #0044cc 100%);
        }
        
        .nav-item .emoji {
            margin-right: 8px;
            font-size: 14px;
        }
        
        /* Adjust main content for sidebar */
        .main-content {
            margin-left: 280px;
            padding: 0 24px 40px;
        }
        
        .content-section {
            display: block;
            margin-bottom: 80px;
            padding-bottom: 40px;
            border-bottom: 1px solid #222222;
        }
        
        .content-section:last-child {
            border-bottom: none;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                width: 100%;
                max-width: 320px;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 0 16px 40px;
            }
            
            .header {
                padding: 16px 0;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .badges {
                margin: 12px 0;
            }
            
            .badge {
                font-size: 10px;
                padding: 3px 8px;
                margin: 1px;
            }
            
            .content h1 {
                font-size: 1.8rem;
                margin-top: 24px;
            }
            
            .content h2 {
                font-size: 1.4rem;
                margin-top: 32px;
            }
            
            .content h3 {
                font-size: 1.2rem;
            }
            
            .content-section {
                margin-bottom: 60px;
                padding-bottom: 30px;
            }
            
            .content pre {
                padding: 12px;
                font-size: 12px;
                overflow-x: auto;
            }
            
            .content code {
                font-size: 11px;
                padding: 2px 6px;
            }
            
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 16px;
                left: 16px;
                z-index: 1001;
                background: #1a1a1a;
                border: 1px solid #333333;
                color: #ffffff;
                padding: 8px 12px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                font-weight: 500;
            }
            
            .mobile-menu-btn:hover {
                background: #2a2a2a;
            }
            
            /* Mobile table optimization */
            .content table {
                font-size: 12px;
                margin: 16px 0;
            }
            
            .content th, .content td {
                padding: 8px 6px;
                word-break: break-word;
            }
            
            /* Stack table columns on very small screens */
            @media (max-width: 480px) {
                .content table {
                    display: block;
                    width: 100%;
                }
                
                .content thead {
                    display: none;
                }
                
                .content tbody {
                    display: block;
                    width: 100%;
                }
                
                .content tr {
                    display: block;
                    margin-bottom: 16px;
                    background: #1a1a1a;
                    border: 1px solid #333333;
                    border-radius: 8px;
                    padding: 12px;
                }
                
                .content td {
                    display: block;
                    text-align: left;
                    border: none;
                    padding: 4px 0;
                    position: relative;
                    padding-left: 50%;
                }
                
                .content td:before {
                    content: attr(data-label);
                    position: absolute;
                    left: 6px;
                    width: 45%;
                    padding-right: 10px;
                    white-space: nowrap;
                    font-weight: 600;
                    color: #888888;
                }
            }
            
            /* Mobile info boxes */
            .info-box {
                padding: 12px;
                margin: 16px 0;
            }
            
            /* Mobile images */
            .content img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
            }
        }
        
        .mobile-menu-btn {
            display: none;
        }
    </style>
</head>
<body>
    <div class="mobile-menu-btn" onclick="toggleSidebar()">☰ Menu</div>
    
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>TD-Store Docs</h2>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-section">
                <h3 class="nav-section-title">Getting Started</h3>
                <a href="#" class="nav-item active" onclick="showSection('overview')">
                    <span class="emoji">🎯</span> Overview
                </a>
                <a href="#" class="nav-item" onclick="showSection('installation')">
                    <span class="emoji">🚀</span> Installation
                </a>
                <a href="#" class="nav-item" onclick="showSection('configuration')">
                    <span class="emoji">⚙️</span> Configuration
                </a>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-section-title">Features</h3>
                <a href="#" class="nav-item" onclick="showSection('store-system')">
                    <span class="emoji">🛒</span> Store System
                </a>
                <a href="#" class="nav-item" onclick="showSection('garage-management')">
                    <span class="emoji">🏠</span> Garage Management
                </a>
                <a href="#" class="nav-item" onclick="showSection('admin-tools')">
                    <span class="emoji">👨‍💼</span> Admin Tools
                </a>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-section-title">API Reference</h3>
                <a href="#" class="nav-item" onclick="showSection('commands')">
                    <span class="emoji">📚</span> Commands
                </a>
                <a href="#" class="nav-item" onclick="showSection('database')">
                    <span class="emoji">🗄️</span> Database
                </a>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-section-title">Support</h3>
                <a href="#" class="nav-item" onclick="showSection('troubleshooting')">
                    <span class="emoji">🔧</span> Troubleshooting
                </a>
                <a href="#" class="nav-item" onclick="showSection('support')">
                    <span class="emoji">📞</span> Support
                </a>
            </div>
        </nav>
    </div>

    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>TD-Store Documentation</h1>
                <div class="badges">
                    <span class="badge blue">TD-Store</span>
                    <span class="badge green">Version 1.0.0</span>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="breadcrumb">
                <a href="#">TD-Store</a> / Documentation
            </div>
            
            <div class="content">
                <!-- Overview Section -->
                <div id="overview" class="content-section active">
                    <div class="info-box">
                        <p><strong>TD-Store</strong> is a FiveM store system that provides a modern, feature-rich in-game store experience with Tebex integration, vehicle garage management, and a comprehensive credit system. Built with security and performance in mind, it offers both players and administrators powerful tools for managing virtual economies.</p>
                    </div>

                    <h2><span class="emoji">🚀</span> Key Highlights</h2>
                    <ul>
                        <li><strong>Security</strong> - Anti-cheat protection and ownership validation</li>
                        <li><strong>Tebex Integration</strong> - Seamless payment processing and webhook handling</li>
                        <li><strong>Beautiful UI</strong> - Responsive, modern interface with dark theme</li>
                        <li><strong>Comprehensive Logging</strong> - Discord webhook integration for monitoring</li>
                        <li><strong>High Performance</strong> - Optimized database queries and efficient resource usage</li>
                    </ul>

                    <h2><span class="emoji">✨</span> What Makes TD-Store Special</h2>
                    <p>TD-Store stands out from other FiveM store systems with its comprehensive feature set and enterprise-grade security. Unlike basic store scripts, TD-Store provides:</p>
                    
                    <ul>
                        <li><strong>Real-time Vehicle Previews</strong> - Players can see exactly what they're buying before purchase</li>
                        <li><strong>Advanced Anti-Cheat</strong> - Multiple layers of protection against exploitation</li>
                        <li><strong>Seamless Tebex Integration</strong> - Direct payment processing without external dependencies</li>
                        <li><strong>Professional Admin Tools</strong> - Complete management interface for server administrators</li>
                        <li><strong>Scalable Architecture</strong> - Handles large player bases with optimized performance</li>
                    </ul>
                </div>

                <!-- Installation Section -->
                <div id="installation" class="content-section">
                    <h2><span class="emoji">🚀</span> Installation Guide</h2>
                    
                    <h3>Prerequisites</h3>
                    <div class="info-box">
                        <p>Before installing TD-Store, ensure you have the following:</p>
                        <ul>
                            <li><strong>FiveM Server</strong> - Running FiveM server with admin access</li>
                            <li><strong>MySQL Database</strong> - MySQL 5.7+ or MariaDB 10.3+</li>
                            <li><strong>oxmysql Resource</strong> - Latest version installed and configured</li>
                            <li><strong>Tebex Account</strong> - Active Tebex account for payment processing</li>
                            <li><strong>Discord Webhook</strong> - Optional but recommended for logging</li>
                        </ul>
                    </div>

                    <h3>Step 1: Create Tebex Credit Packages</h3>
                    <div class="info-box warning">
                        <p><strong>Important:</strong> Complete this step BEFORE installing the resource. Your credit packages must be created in Tebex first.</p>
                    </div>
                    
                    <ol>
                        <li><strong>Login to your Tebex Dashboard</strong>
                            <ul>
                                <li>Go to <a href="https://creator.tebex.io" target="_blank">creator.tebex.io</a></li>
                                <li>Navigate to your store</li>
                            </ul>
                        </li>
                        
                        <li><strong>Create Credit Packages</strong>
                            <ul>
                                <li>Go to <strong>Packages</strong> → <strong>Create Package</strong></li>
                                <li>Set package type to <strong>Single</strong></li>
                                <li>Name your package (e.g., "100 Credits", "500 Credits", "1000 Credits")</li>
                                <li>Set the price in your preferred currency</li>
                                <li>Add a description for players</li>
                            </ul>
                        </li>
                        
                        <li><strong>Configure Package Deliverables</strong>
                            <div class="info-box">
                                <p><strong>Important:</strong> The deliverable type doesn't matter for TD-Store. Credits are handled automatically by our webhook system.</p>
                                <p>You can set any deliverable action such as:</p>
                                <ul>
                                    <li>"Assign a Discord role" (recommended - easiest option)</li>
                                    <li>"Execute a command"</li>
                                    <li>"Send a message"</li>
                                </ul>
                                <p>The actual credit amount will be configured in the TD-Store Manager interface after installation.</p>
                            </div>
                        </li>
                        
                        <li><strong>Save and Enable Package</strong>
                            <ul>
                                <li>Make sure the package is enabled</li>
                                <li>Note the package ID (you'll need this later)</li>
                            </ul>
                        </li>
                        
                        <li><strong>Repeat for Multiple Credit Tiers</strong>
                            <ul>
                                <li>Create packages for different credit amounts (e.g., 100, 500, 1000, 2500 credits)</li>
                                <li>Set appropriate pricing for each tier</li>
                            </ul>
                        </li>
                    </ol>

                    <h3>Step 2: Download and Extract</h3>
                    <ol>
                        <li>Download TD-Store from your cfx assets</li>
                        <li>Extract the archive to your server's <code>resources</code> folder</li>
                        <li>Ensure the folder structure is: <code>resources/td-store/</code></li>
                    </ol>

                    <h3>Step 3: Database Setup</h3>
                    <ol>
                        <li>Open your MySQL database management tool (phpMyAdmin, MySQL Workbench, etc.)</li>
                        <li>Import the <code>database.sql</code> file into your database</li>
                        <li>Verify the following tables were created:
                            <ul>
                                <li><code>td_store_players</code> - Player data and credit balances</li>
                                <li><code>td_store_purchases</code> - Purchase history</li>
                                <li><code>td_store_ownership</code> - Vehicle ownership records</li>
                                <li><code>td_store_items</code> - Store items configuration</li>
                            </ul>
                        </li>
                    </ol>

                    <h3>Step 4: Resource Configuration</h3>
                    <p>Add TD-Store to your <code>server.cfg</code> file:</p>
                    <pre><code># Database (must load first)
ensure oxmysql

# TD-Store (loads after oxmysql)
ensure td-store</code></pre>

                    <h3>Step 5: Permissions Setup</h3>
                    <p>Add these ACE permissions to your <code>server.cfg</code>:</p>
                    <pre><code># Admin permissions
add_ace group.admin tdstore.admin allow

# Manager permissions  
add_ace group.manager tdstore.manager allow</code></pre>

                    <div class="info-box warning">
                        <p><strong>Important:</strong> Ensure oxmysql loads before TD-Store to prevent database connection errors.</p>
                    </div>
                </div>

                <!-- Configuration Section -->
                <div id="configuration" class="content-section">
                    <h2><span class="emoji">⚙️</span> Configuration</h2>
                    
                    <h3>Server Configuration (s_config.lua)</h3>
                    <p>The server configuration contains sensitive information and should be configured carefully:</p>
                    
                    <h4>Tebex Integration</h4>
                    <p>Configure your Tebex settings for payment processing. You'll need to obtain these values from your Tebex dashboard:</p>
                    
                    <h5>Getting Your Tebex API Keys</h5>
                    <p>Navigate to your Tebex dashboard → <strong>Integrations</strong> → <strong>API Keys</strong> to find your credentials:</p>
                    <img src="assets/tebex-api.png" alt="Tebex API Keys Configuration" style="max-width: 100%; border: 1px solid #30363d; border-radius: 6px; margin: 16px 0;">
                    
                    <pre><code>SConfig.Tebex = {
    private_key = "YOUR_TEBEX_PRIVATE_KEY",
    public_token = "YOUR_TEBEX_PUBLIC_TOKEN", 
    project_id = "YOUR_TEBEX_PROJECT_ID",
    webhook_secret = "YOUR_WEBHOOK_SECRET",
    webhook = {
        url = "http://your-server-ip:30120/td-store/webhook"
    }
}</code></pre>

                    <h5>Setting Up Tebex Webhooks</h5>
                    <p><strong>IMPORTANT:</strong> Follow these steps in the exact order to ensure webhook validation works properly:</p>
                    
                    <div class="info-box warning">
                        <p><strong>Step 1 - Server Preparation:</strong> Before configuring webhooks, ensure your FiveM server is running and the TD-Store script is started.</p>
                    </div>
                    
                    <div class="info-box warning">
                        <p><strong>Step 2 - Configure Webhook URL:</strong> In your <code>s_config.lua</code>, set the webhook URL to: <code>http://YOUR_SERVER_IP:30120/td-store/webhook</code></p>
                    </div>
                    
                    <div class="info-box warning">
                        <p><strong>Step 3 - Get Webhook from Tebex:</strong> Navigate to your Tebex dashboard → <strong>Integrations</strong> → <strong>Webhooks</strong> and create a new webhook.</p>
                    </div>
                    
                    <div class="info-box warning">
                        <p><strong>Step 4 - Validate Endpoint:</strong> Enter your webhook URL (<code>http://YOUR_SERVER_IP:30120/td-store/webhook</code>) in Tebex. Tebex will test the endpoint to ensure it's accessible.</p>
                    </div>
                    
                    <div class="info-box warning">
                        <p><strong>Step 5 - Copy Webhook Secret:</strong> After successful validation, copy the webhook secret from Tebex and add it to your <code>s_config.lua</code> file.</p>
                    </div>
                    
                    <div class="info-box warning">
                        <p><strong>Step 6 - Restart Script:</strong> Restart your FiveM server or reload the TD-Store script to apply the webhook secret configuration.</p>
                    </div>
                    
                    <h5>Webhook Security Features</h5>
                    <div class="info-box success">
                        <p><strong>Built-in Security:</strong> TD-Store includes enterprise-grade webhook security:</p>
                        <ul>
                            <li><strong>HMAC SHA-256 Signature Validation</strong> - All webhooks are cryptographically validated using Tebex's double-hash method</li>
                            <li><strong>Tebex IP Whitelist</strong> - Only requests from verified Tebex IP addresses are accepted</li>
                            <li><strong>Production Ready</strong> - Full security implementation with proper error handling</li>
                            <li><strong>No External Dependencies</strong> - Webhook server runs directly in FiveM, no separate Node.js server required</li>
                        </ul>
                    </div>
                    
                    <p>Configure webhooks in your Tebex dashboard → <strong>Integrations</strong> → <strong>Webhooks</strong>:</p>
                    <img src="assets/tebex-webhook.png" alt="Tebex Webhook Configuration" style="max-width: 100%; border: 1px solid #30363d; border-radius: 6px; margin: 16px 0;">
                    
                    <div class="info-box warning">
                        <p><strong>Critical:</strong> Your server must be running and accessible from the internet before Tebex can validate the webhook endpoint. The webhook URL format should be: <code>http://YOUR_SERVER_IP:30120/td-store/webhook</code></p>
                    </div>

                    <h4>Security Settings</h4>
                    <pre><code>SConfig.Security = {
    validateOwnershipOnEnter = true,
    allowPassengers = true,
    ejectUnauthorizedDrivers = true,
    deleteVehicleOnUnauthorizedAccess = false,
    kickPlayerOnRepeatedViolations = false,
    maxUnauthorizedAccessAttempts = 5,
    logAllTransactions = true,
    maxPurchasePerMinute = 10,
    requireAdminForRefunds = true,
    enableAntiCheat = true,
    maxVehiclesPerPlayer = 10,
    cooldownBetweenSpawns = 3
}</code></pre>

                    <h4>Vehicle Spawn Settings</h4>
                    <pre><code>SConfig.VehicleSpawn = {
    despawnOnDisconnect = true,
    despawnOnServerRestart = true,
    maxSpawnDistance = 50.0,
    spawnProtectionTime = 5,
    enableSpawnProtection = true
}</code></pre>

                    <h4>Discord Webhook</h4>
                    <pre><code>SConfig.Discord = {
    enabled = true,
    webhookUrl = "YOUR_DISCORD_WEBHOOK_URL",
    serverName = "Your Server Name",
    botName = "TD Store Bot",
    botAvatar = "YOUR_BOT_AVATAR_URL",
    logPurchases = true,
    logCreditPurchases = true,
    logUnauthorizedAccess = true,
    logKicks = true,
    logAdminActions = true,
    colors = {
        purchase = 65280,
        creditPurchase = 3447003,
        unauthorizedAccess = 16711680,
        kick = 16753920,
        adminAction = 10181046,
        error = 10038562
    }
}</code></pre>

                    <h3>Client Configuration (c_config.lua)</h3>
                    <p>The client configuration contains non-sensitive settings:</p>
                    
                    <h4>General Settings</h4>
                    <pre><code>CConfig.Command = 'store'        -- Command to open store
CConfig.Keybind = 'F7'           -- Keybind to open store
CConfig.EnableKeybind = true     -- Enable/disable keybind</code></pre>

                    <h4>Vehicle Spawn Settings</h4>
                    <pre><code>CConfig.VehicleSpawn = {
    spawnDistance = 10.0,
    maxSpawnedVehicles = 3,
    despawnOnDisconnect = true,
    spawnHeight = 1.0
}</code></pre>

                    <h4>Vehicle Preview Settings</h4>
                    <pre><code>CConfig.VehiclePreview = {
    dealershipCoords = vector3(-56.79, -1096.63, 25.42),
    vehicleSpawnCoords = vector3(-50.0, -1100.0, 25.5),
    cameraCoords = vector3(-45.0, -1095.0, 27.0),
    cameraRotation = vector3(-10.0, 0.0, 45.0)
}</code></pre>

                    <h4>UI Settings</h4>
                    <pre><code>CConfig.UI = {
    theme = "dark",
    currencySymbol = "$",
    creditSymbol = "C"
}</code></pre>
                </div>

                <!-- Store System Section -->
                <div id="store-system" class="content-section">
                    <h2><span class="emoji">🛒</span> Store System</h2>
                    
                    <h3>Vehicle Store</h3>
                    <p>The vehicle store allows players to browse, preview, and purchase vehicles with a modern interface:</p>
                    <ul>
                        <li><strong>Real-time Previews</strong> - Players are teleported to a showroom to preview vehicles</li>
                        <li><strong>Detailed Information</strong> - Vehicle stats, price, and description displayed</li>
                        <li><strong>Category Filtering</strong> - Filter vehicles by type, price, or manufacturer</li>
                        <li><strong>Search Functionality</strong> - Quick search for specific vehicles</li>
                    </ul>

                    <h3>Credit Packages</h3>
                    <p>Tebex-integrated credit purchasing system:</p>
                    <ul>
                        <li><strong>Automatic Sync</strong> - Credit packages sync automatically from Tebex</li>
                        <li><strong>Real-time Processing</strong> - Instant credit delivery via webhooks</li>
                        <li><strong>Secure Transactions</strong> - All payments processed securely through Tebex</li>
                        <li><strong>Purchase History</strong> - Complete transaction logging</li>
                    </ul>

                    <h3>Item Management</h3>
                    <p>Administrators can manage store items through the manager interface:</p>
                    <ul>
                        <li><strong>Add Vehicles</strong> - Add new vehicles to the store</li>
                        <li><strong>Edit Prices</strong> - Modify vehicle prices and descriptions</li>
                        <li><strong>Enable/Disable</strong> - Toggle item availability</li>
                        <li><strong>Bulk Operations</strong> - Manage multiple items at once</li>
                    </ul>
                </div>

                <!-- Garage Management Section -->
                <div id="garage-management" class="content-section">
                    <h2><span class="emoji">🏠</span> Garage Management</h2>
                    
                    <h3>My Garage</h3>
                    <p>Personal vehicle collection management system:</p>
                    <ul>
                        <li><strong>Vehicle Collection</strong> - View all owned vehicles in one place</li>
                        <li><strong>Quick Spawn</strong> - Spawn vehicles with a single click</li>
                        <li><strong>Vehicle Information</strong> - View vehicle stats and purchase date</li>
                        <li><strong>Organization</strong> - Sort vehicles by type, date, or name</li>
                    </ul>

                    <h3>Vehicle Spawning</h3>
                    <p>Advanced vehicle spawning system with protection:</p>
                    <ul>
                        <li><strong>Spawn Protection</strong> - Temporary invincibility after spawning</li>
                        <li><strong>Location Validation</strong> - Ensures safe spawn locations</li>
                        <li><strong>Duplicate Prevention</strong> - Prevents spawning multiple vehicles</li>
                        <li><strong>Auto-cleanup</strong> - Removes vehicles on disconnect</li>
                    </ul>

                    <h3>Ownership Validation</h3>
                    <p>Secure vehicle access control system:</p>
                    <ul>
                        <li><strong>Driver Validation</strong> - Only owners can drive their vehicles</li>
                        <li><strong>Passenger Control</strong> - Configurable passenger permissions</li>
                        <li><strong>Unauthorized Access Detection</strong> - Logs and prevents unauthorized use</li>
                        <li><strong>Automatic Ejection</strong> - Removes unauthorized drivers</li>
                    </ul>
                </div>

                <!-- Admin Tools Section -->
                <div id="admin-tools" class="content-section">
                    <h2><span class="emoji">👨‍💼</span> Admin Tools</h2>
                    
                    <h3>Admin Panel</h3>
                    <p>Comprehensive player management interface:</p>
                    <ul>
                        <li><strong>Player Management</strong> - View and manage player data</li>
                        <li><strong>Credit Administration</strong> - Add/remove credits from players</li>
                        <li><strong>Refund Processing</strong> - Process purchase refunds</li>
                        <li><strong>Transaction History</strong> - View complete purchase history</li>
                    </ul>

                    <h3>Manager Tools</h3>
                    <p>Store management interface for administrators:</p>
                    <ul>
                        <li><strong>Item Management</strong> - Add/edit store items</li>
                        <li><strong>Credit Package Control</strong> - Enable/disable credit packages</li>
                        <li><strong>Store Configuration</strong> - Modify store settings</li>
                        <li><strong>Analytics Dashboard</strong> - View sales and usage statistics</li>
                    </ul>

                    <h3>Security Monitoring</h3>
                    <p>Advanced security and monitoring features:</p>
                    <ul>
                        <li><strong>Unauthorized Access Logs</strong> - Track suspicious activity</li>
                        <li><strong>Transaction Monitoring</strong> - Monitor all purchases</li>
                        <li><strong>Anti-Cheat Detection</strong> - Detect and prevent exploitation</li>
                        <li><strong>Discord Integration</strong> - Real-time notifications</li>
                    </ul>
                </div>

                <!-- Commands Section -->
                <div id="commands" class="content-section">
                    <h2><span class="emoji">📚</span> Admin Commands</h2>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Command</th>
                                <th>Permission</th>
                                <th>Description</th>
                                <th>Usage</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-label="Command"><code>/givestorecredits</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">Give credits to player</td>
                                <td data-label="Usage"><code>/givestorecredits [id] [amount]</code></td>
                            </tr>
                            <tr>
                                <td data-label="Command"><code>/removestorecredits</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">Remove credits from player</td>
                                <td data-label="Usage"><code>/removestorecredits [id] [amount]</code></td>
                            </tr>
                            <tr>
                                <td data-label="Command"><code>/resetstoreplayer</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">Reset player data</td>
                                <td data-label="Usage"><code>/resetstoreplayer [id]</code></td>
                            </tr>
                            <tr>
                                <td data-label="Command"><code>/viewstoreplayer</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">View player information</td>
                                <td data-label="Usage"><code>/viewstoreplayer [id]</code></td>
                            </tr>
                            <tr>
                                <td data-label="Command"><code>/givestorevehicle</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">Give vehicle to player</td>
                                <td data-label="Usage"><code>/givestorevehicle [id] [vehicle_id]</code></td>
                            </tr>
                            <tr>
                                <td data-label="Command"><code>/removestorevehicle</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">Remove vehicle from player</td>
                                <td data-label="Usage"><code>/removestorevehicle [id] [vehicle_id]</code></td>
                            </tr>
                            <tr>
                                <td data-label="Command"><code>/refundstorepurchase</code></td>
                                <td data-label="Permission"><code>tdstore.admin</code></td>
                                <td data-label="Description">Refund a purchase</td>
                                <td data-label="Usage"><code>/refundstorepurchase [player_id] [purchase_id]</code></td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Manager Commands</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Permission</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-label="Permission"><code>tdstore.manager</code></td>
                                <td data-label="Description">Access to store management interface for adding/editing items and credit packages</td>
                            </tr>
                        </tbody>
                    </table>
                </div>


                <!-- Database Section -->
                <div id="database" class="content-section">
                    <h2><span class="emoji">🗄️</span> Database Structure</h2>
                    
                    <h3>Tables Overview</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Table</th>
                                <th>Description</th>
                                <th>Key Fields</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td data-label="Table"><code>td_store_players</code></td>
                                <td data-label="Description">Player data and credit balances</td>
                                <td data-label="Key Fields">id, name, steam_id, license, discord_id, fivem_id, credits, last_seen, first_seen</td>
                            </tr>
                            <tr>
                                <td data-label="Table"><code>td_store_purchases</code></td>
                                <td data-label="Description">Purchase history and transactions</td>
                                <td data-label="Key Fields">id, player_id, item_id, credits_spent, transaction_id, basket_ident, checkout_url, timestamp</td>
                            </tr>
                            <tr>
                                <td data-label="Table"><code>td_store_ownership</code></td>
                                <td data-label="Description">Vehicle/item ownership records</td>
                                <td data-label="Key Fields">player_id, item_id, purchase_id, created_at</td>
                            </tr>
                            <tr>
                                <td data-label="Table"><code>td_store_items</code></td>
                                <td data-label="Description">Store items and configurations</td>
                                <td data-label="Key Fields">id, name, type, model, hash_key, price_credits, description, category, bundle_items, image_url, active</td>
                            </tr>
                            <tr>
                                <td data-label="Table"><code>td_store_credit_packages</code></td>
                                <td data-label="Description">Tebex credit package management</td>
                                <td data-label="Key Fields">id, tebex_package_id, name, description, price, currency, credits, tebex_url, image_url, enabled, popular</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Database Relationships</h3>
                    <ul>
                        <li><strong>Players → Purchases</strong> - One-to-many relationship</li>
                        <li><strong>Players → Ownership</strong> - One-to-many relationship</li>
                        <li><strong>Items → Purchases</strong> - One-to-many relationship</li>
                    </ul>
                </div>

                <!-- Troubleshooting Section -->
                <div id="troubleshooting" class="content-section">
                    <h2><span class="emoji">🔧</span> Troubleshooting</h2>
                    
                    <h3>Common Issues</h3>
                    
                    <h4>Webhook Not Working</h4>
                    <div class="info-box warning">
                        <p><strong>Problem:</strong> Tebex webhooks not processing payments</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li><strong>Follow Setup Order:</strong> Ensure you followed the exact webhook setup sequence (server running → config URL → Tebex validation → copy secret → restart)</li>
                            <li><strong>Server Status:</strong> Verify your FiveM server is running and TD-Store script is started before configuring webhooks</li>
                            <li><strong>Port Access:</strong> Ensure server is running on port 30120 and accessible from internet</li>
                            <li><strong>URL Format:</strong> Verify webhook URL format is exactly: <code>http://YOUR_SERVER_IP:30120/td-store/webhook</code></li>
                            <li><strong>Endpoint Validation:</strong> Tebex must successfully validate the endpoint before webhooks will work</li>
                            <li><strong>Secret Match:</strong> Check webhook secret in config matches the one from Tebex dashboard</li>
                            <li><strong>Restart Required:</strong> Restart server after adding webhook secret to configuration</li>
                            <li><strong>Firewall:</strong> Ensure port 30120 is open in your server firewall</li>
                            <li><strong>Tebex IP Whitelist:</strong> If webhook validation is failing, ensure these Tebex IP addresses are whitelisted in your firewall/server configuration:
                                <ul>
                                    <li><code>18.209.80.3</code></li>
                                    <li><code>54.87.231.232</code></li>
                                </ul>
                                These are the only IP addresses that Tebex webhooks will be sent from.
                            </li>
                        </ul>
                    </div>

                    <h4>Database Connection Issues</h4>
                    <div class="info-box warning">
                        <p><strong>Problem:</strong> Database errors or connection failures</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Verify oxmysql is loaded before TD-Store</li>
                            <li>Check database credentials in oxmysql config</li>
                            <li>Ensure database tables were created properly</li>
                            <li>Check MySQL service is running</li>
                        </ul>
                    </div>

                    <h4>Permission Errors</h4>
                    <div class="info-box warning">
                        <p><strong>Problem:</strong> Admin commands not working</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Verify ACE permissions are set correctly</li>
                            <li>Check player has proper group assignment</li>
                            <li>Restart server after permission changes</li>
                            <li>Ensure permissions are in server.cfg</li>
                        </ul>
                    </div>

                    <h4>Vehicle Spawning Issues</h4>
                    <div class="info-box warning">
                        <p><strong>Problem:</strong> Vehicles not spawning or disappearing</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Check spawn coordinates in config</li>
                            <li>Verify vehicle model names are correct</li>
                            <li>Ensure spawn protection settings are appropriate</li>
                            <li>Check for conflicting vehicle scripts</li>
                        </ul>
                    </div>

                    <h3>Debug Mode</h3>
                    <p>Enable debug mode in <code>s_config.lua</code> for detailed logging:</p>
                    <pre><code>SConfig.Debug = true</code></pre>
                    <p>This will provide detailed console output for troubleshooting.</p>

                    <h3>Log Files</h3>
                    <p>Check the following for error messages:</p>
                    <ul>
                        <li><strong>Server Console</strong> - Main server output</li>
                        <li><strong>F8 Console</strong> - Client-side errors</li>
                        <li><strong>Discord Webhook Logs</strong> - Transaction and security events</li>
                        <li><strong>MySQL Error Logs</strong> - Database-related issues</li>
                    </ul>
                </div>

                <!-- Support Section -->
                <div id="support" class="content-section">
                    <h2><span class="emoji">📞</span> Support</h2>
                    
                    <h3>Getting Help</h3>
                    <div class="info-box">
                        <ul>
                            <li><strong>Discord Support:</strong> <a href="https://discord.gg/tWwfPnxz47">Join our Discord</a></li>
                            <li><strong>Documentation:</strong> This documentation covers most common scenarios</li>
                            <li><strong>Issues:</strong> Report bugs and issues through Discord</li>
                        </ul>
                    </div>

                    <h3>Before Requesting Support</h3>
                    <ol>
                        <li>Check this documentation thoroughly</li>
                        <li>Enable debug mode and check console output</li>
                        <li>Verify your configuration matches the examples</li>
                        <li>Test with minimal configuration first</li>
                        <li>Check for conflicting resources</li>
                    </ol>

                    <h3>Support Information</h3>
                    <p>When requesting support, please provide:</p>
                    <ul>
                        <li><strong>Server Console Errors</strong> - Copy and paste error messages</li>
                        <li><strong>Configuration Files</strong> - Remove sensitive data before sharing</li>
                        <li><strong>Steps to Reproduce</strong> - Detailed steps to reproduce the issue</li>
                        <li><strong>Server Information</strong> - FiveM version, resources, and server specs</li>
                        <li><strong>Database Information</strong> - MySQL version and any relevant logs</li>
                    </ul>

                    <h3>Community Resources</h3>
                    <ul>
                        <li><strong>Discord Community:</strong> <a href="https://discord.gg/tWwfPnxz47">https://discord.gg/tWwfPnxz47</a></li>
                        <li><strong>Updates & Announcements:</strong> Check Discord for latest updates</li>
                        <li><strong>Feature Requests:</strong> Submit suggestions through Discord</li>
                        <li><strong>Bug Reports:</strong> Report issues with detailed information</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>TD-Store</strong> - Tebex Credit Integration + Vehicle Management + Secure Webhook Processing</p>
        </div>
    </div>

    <script>
        let isScrolling = false;
        let scrollTimeout;
        
        function showSection(sectionId) {
            // Prevent flashing during scroll
            isScrolling = true;
            
            // Smooth scroll to the section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start',
                    inline: 'nearest'
                });
            }
            
            // Update active nav item
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the clicked nav item
            const activeNavItem = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
            if (activeNavItem) {
                activeNavItem.classList.add('active');
            }
            
            // Close mobile menu if open
            const sidebar = document.getElementById('sidebar');
            if (sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
            
            // Reset scrolling flag after animation
            setTimeout(() => {
                isScrolling = false;
            }, 1000);
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }
        
        // Update active nav item based on scroll position
        function updateActiveNav() {
            if (isScrolling) return; // Don't update during programmatic scrolling
            
            const sections = document.querySelectorAll('.content-section');
            const navItems = document.querySelectorAll('.nav-item');
            
            let currentSection = '';
            const scrollPos = window.scrollY + 200; // Increased offset for better detection
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                
                if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                    currentSection = section.id;
                }
            });
            
            // Only update if we found a valid section
            if (currentSection) {
                // Update nav items
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('onclick').includes(currentSection)) {
                        item.classList.add('active');
                    }
                });
            }
        }
        
        // Throttled scroll handler
        window.addEventListener('scroll', function() {
            if (scrollTimeout) {
                clearTimeout(scrollTimeout);
            }
            scrollTimeout = setTimeout(updateActiveNav, 50); // Increased delay
        });
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (window.innerWidth <= 768 && 
                !sidebar.contains(event.target) && 
                !mobileMenuBtn.contains(event.target)) {
                sidebar.classList.remove('open');
            }
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth > 768) {
                sidebar.classList.remove('open');
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial active nav item
            const firstNavItem = document.querySelector('.nav-item');
            if (firstNavItem) {
                firstNavItem.classList.add('active');
            }
            
            // Update after a short delay to ensure proper positioning
            setTimeout(updateActiveNav, 100);
        });
    </script>
</body>
</html>
